{
	"AWSTemplateFormatVersion" : "2010-09-09",
	"Description" : "Creates a dedicated bucket to hold cloudformation templates needed to provision the project stacks and to house the resources (installation files, configuration files) needed for the environment",
	"Parameters" : {
		"costCenterTag":{
      "Type": "String",
      "Description":"tag - cost center"
    },
    "environmentTag":{
      "Type": "String",
      "Description":"tag - environment",
      "AllowedValues" : ["sb", "test", "dev", "mergeddev", "qa", "prod"]
    },
    "groupTag":{
      "Type": "String",
      "Description":"tag - group name"
    },
    "keepAliveTag":{
      "Type": "String",
      "Description":"tag - keep alive tag",
      "AllowedValues" : ["true", "false"]
    },
    "ownerTag":{
      "Type": "String",
      "Description":"tag - product owner"
    },
    "projectTag":{
      "Type": "String",
      "Description":"tag - project name"
    },
    "stackNameTag":{
	    "Type": "String",
	    "Description":"tag - stack name"
	  },
		"cfTemplateBucketName":{
	  	"Type":"String",
	  	"Description": "The name of the S3 bucket that holds the cloudformation templates used in nested stacks"
	  },
		"resourcesBucketName":{
	  	"Type":"String",
	  	"Description": "The name of the S3 bucket that holds resource files for the environment"
	  }
	},

	"Mappings":{},

	"Resources" : {
		"cfTemplateBucket":{
			"Type":"AWS::S3::Bucket",
			"Metadata":{
				"Comment": "Provision a dedicated bucket to hold cloudformation templates needed to provision the project stacks."
			},
			"Properties":{
				"BucketName" : {"Ref" : "cfTemplateBucketName"},
				"Tags":[
          {
            "Key":"cost-center",
            "Value":{"Ref": "costCenterTag"}
          },
          {
            "Key":"environment",
            "Value":{"Ref": "environmentTag"}
	        },
          {
            "Key":"group",
            "Value":{"Ref": "groupTag"}
          },
          {
		        "Key":"keep-alive",
		        "Value":{"Ref": "keepAliveTag"}
		      },
          {
		        "Key":"owner",
		        "Value":{"Ref": "ownerTag"}
		      },
          {
            "Key":"project",
            "Value":{"Ref": "projectTag"}
          },
          {
            "Key":"stack",
            "Value": {"Ref": "stackNameTag"}
          }
        ]
      }
    },
		"resourcesBucket":{
			"Type":"AWS::S3::Bucket",
			"Metadata":{
				"Comment":"Provision a dedicated bucket to hold the resources (installation files, configuration files) needed for the environment."
			},
			"Properties":{
				"BucketName" : {"Ref" : "resourcesBucketName"},
				"Tags":[
          {
            "Key":"cost-center",
            "Value":{"Ref": "costCenterTag"}
          },
          {
            "Key":"environment",
            "Value":{"Ref": "environmentTag"}
	        },
          {
            "Key":"group",
            "Value":{"Ref": "groupTag"}
          },
          {
		        "Key":"keep-alive",
		        "Value":{"Ref": "keepAliveTag"}
		      },
          {
		        "Key":"owner",
		        "Value":{"Ref": "ownerTag"}
		      },
          {
            "Key":"project",
            "Value":{"Ref": "projectTag"}
          },
          {
            "Key":"stack",
            "Value": {"Ref": "stackNameTag"}
          }
        ]
      }
    }
	}
}
